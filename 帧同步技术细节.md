### 帧同步
```
1.	使用高效的网络协议 UDP
2.	使用定点数替代浮点数 (误差)
3.	冗余帧（前三帧）， 防止UDP丢包重连,UDP不会粘包
4.	使用protobuf 减小传输流量
5.	使用乐观锁帧技术, 防止卡帧（服务器定时同步，玩家卡顿或掉线，服务器发空帧）
6.	使用自己的物理引擎 (u3d的物理引擎基于浮点数)
7.	逻辑帧和渲染帧分离， 一般逻辑帧66ms(1秒15帧), 渲染帧可以小点(一秒30到60帧)， 保证平滑，客户端定时66ms发帧， 服务器定时66s收集发帧
8.	第一帧开始同步和锁帧(严格锁帧), 并下发随机种子
9.	客户端负责计算所有逻辑，服务器只同步动作等
10.	断线重连要追帧
向服务器请求第一帧到当前最新帧的所有数据，同时服务器从最新帧开始向客户端广播，客户端收到帧序列之后快进播放，直到赶上最新帧
11.	帧同步作弊比较容易
12.	可以使用预测回滚技术保证平滑， 断线重连不用从第一帧开始播， 使用预测回滚技术隔一段时间把当前的状态快照到客户端本地文件， 客户端断线重连时根据文件内容从断线时的帧状态开始追帧，这样可以快速追上

```

### 为什么使用UDP:
```
1.	传输效率高， 无干扰，用户可完全控制
2.	无连接，包头少， 只管发， 不管收， 所以快
3.	TCP 有流量控制， 窗口控制， 缓存控制， 有延迟， TCP 还要重发机制， 游戏逻辑不好控制
4.	UDP 要手动拆包， 需要带上帧序号
5.	帧同步要快
```

### 帧同步同步的是什么
```
1.	帧序号
2.	玩家的操作
移动位置， 方向，房间号，速度..
```

### 帧频率：
```
1.	客户端和服务器保持一致的帧频率，一般为66ms， 约1秒15帧
```

### 帧同步时序：
```
1．	Tcp协议 登录服务器
2.	Tcp 处理匹配请求
3.	Tcp 处理准备好请求和开局， 服务器创建好房间， 玩家进入房间等待
4.	当房间内玩家都准备好前， 服务器等待起始帧， 当都准备好后，客户端和服务器使用udp传输，服务器开始广播第1帧， 然后第2帧。。。
5.	相同的输入--->相同的输出， 所以服务器第一帧开始前要同步随机种子到所有客户端， 同时每一帧都要带上帧序号
```
